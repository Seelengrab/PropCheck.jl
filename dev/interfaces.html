<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Interfaces · PropCheck.jl Documentation</title><meta name="title" content="Interfaces · PropCheck.jl Documentation"/><meta property="og:title" content="Interfaces · PropCheck.jl Documentation"/><meta property="twitter:title" content="Interfaces · PropCheck.jl Documentation"/><meta name="description" content="Documentation for PropCheck.jl Documentation."/><meta property="og:description" content="Documentation for PropCheck.jl Documentation."/><meta property="twitter:description" content="Documentation for PropCheck.jl Documentation."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">PropCheck.jl Documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Main Page</a></li><li><a class="tocitem" href="intro.html">Introduction to PBT</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="Examples/basic.html">Basic Usage</a></li><li><a class="tocitem" href="Examples/structs.html">Generating Structs</a></li><li><a class="tocitem" href="Examples/containers.html">Generating Containers</a></li><li><a class="tocitem" href="Examples/properties.html">Composing Generators</a></li><li><a class="tocitem" href="Examples/chaining.html">Generator Chaining</a></li></ul></li><li><a class="tocitem" href="shrinktrees.html">Shrinking with <code>Tree</code>s</a></li><li><a class="tocitem" href="faq.html">FAQ</a></li><li class="is-active"><a class="tocitem" href="interfaces.html">Interfaces</a><ul class="internal"><li><a class="tocitem" href="#AbstractIntegrated{T}"><span><code>AbstractIntegrated{T}</code></span></a></li><li><a class="tocitem" href="#ExtentIntegrated{T}"><span><code>ExtentIntegrated{T}</code></span></a></li><li><a class="tocitem" href="#InfiniteIntegrated{T}"><span><code>InfiniteIntegrated{T}</code></span></a></li><li><a class="tocitem" href="#FiniteIntegrated{T}"><span><code>FiniteIntegrated{T}</code></span></a></li><li><a class="tocitem" href="#Generation-and-Shrinking"><span>Generation &amp; Shrinking</span></a></li></ul></li><li><a class="tocitem" href="api.html">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="interfaces.html">Interfaces</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="interfaces.html">Interfaces</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Seelengrab/PropCheck.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Seelengrab/PropCheck.jl/blob/main/docs/src/interfaces.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Interfaces"><a class="docs-heading-anchor" href="#Interfaces">Interfaces</a><a id="Interfaces-1"></a><a class="docs-heading-anchor-permalink" href="#Interfaces" title="Permalink"></a></h1><p>PropCheck.jl provides a number of interfaces to hook into with your code. Some of these are more robust than others, while some are likely to change in the future. Nevertheless, they are documented here in order to facilitate experimentation, as well as gathering feedback on how well they work and where they have missing functionality/aren&#39;t clear enough, before an eventual 1.0 version release.</p><p>The interfaces mentioned on this page are intended for user-extension, in the manner described. Overloading the functions in a different way or assuming more of an interface than is guaranteed is not supported.</p><p>For the abstract-type based interfaces <code>AbstractIntegrated</code> and <code>ExtentIntegrated</code>, you can use the API provided by <a href="https://github.com/Seelengrab/RequiredInterfaces.jl">RequiredInterfaces.jl</a> to check for compliance, if you want to provide a custom integrated shrinker.</p><h2 id="AbstractIntegrated{T}"><a class="docs-heading-anchor" href="#AbstractIntegrated{T}"><code>AbstractIntegrated{T}</code></a><a id="AbstractIntegrated{T}-1"></a><a class="docs-heading-anchor-permalink" href="#AbstractIntegrated{T}" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PropCheck.AbstractIntegrated" href="#PropCheck.AbstractIntegrated"><code>PropCheck.AbstractIntegrated</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractIntegrated{T}</code></pre><p>Abstract supertype for all integrated shrinkers. The <code>T</code> type parameter describes the kinds of objects generated by this integrated shrinker. This is usually going to be a <a href="api.html#PropCheck.Tree"><code>Tree</code></a> of objects.</p><p>Required methods:</p><ul><li><code>generate(rng::AbstractRNG, ::A) where A &lt;: AbstractIntegrated</code></li><li><code>freeze(::A) where A &lt;: AbstractIntegrated</code></li></ul><p>Fallback definitions:</p><ul><li><code>Base.IteratorEltype -&gt; Base.HasEltype()</code></li><li><code>Base.IteratorSize -&gt; Base.SizeUnknown()</code></li><li><code>Base.eltype -&gt; T</code></li><li><code>Base.iterate(::AbstractIntegrated, rng=default_rng())</code><ul><li>Requires <code>generate</code></li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/PropCheck.jl/blob/c00aa873953d10edb33ac9e5846983d9516dbcab/src/integrated.jl#L4-L23">source</a></section></article><p><code>AbstractIntegrated</code> is the most unassuming integrated shrinker type, requiring little more than defining <code>generate</code>. <code>generate</code> on an <code>AbstractIntegrated</code> is, in the current design, only going to return <code>Tree</code>s (and others are unlikely to work/not supported by the rest of the package), but that&#39;s not technically necessary. A more sophisticated generation process than the implicit &amp; lazy unfolding of a tree could share subtrees, which would be more like a lazy graph. While technically possible, this is not currently planned.</p><h2 id="ExtentIntegrated{T}"><a class="docs-heading-anchor" href="#ExtentIntegrated{T}"><code>ExtentIntegrated{T}</code></a><a id="ExtentIntegrated{T}-1"></a><a class="docs-heading-anchor-permalink" href="#ExtentIntegrated{T}" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PropCheck.ExtentIntegrated" href="#PropCheck.ExtentIntegrated"><code>PropCheck.ExtentIntegrated</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ExtentIntegrated{T} &lt;: InfiniteIntegrated{T}</code></pre><p>An integrated shrinker which has bounds. The bounds can be accessed with the <code>extent</code> function and are assumed to have <code>first</code> and <code>last</code> method defined for them.</p><p>Required methods:</p><ul><li><code>extent(::ExtentIntegrated)</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/PropCheck.jl/blob/c00aa873953d10edb33ac9e5846983d9516dbcab/src/integrated.jl#L107-L116">source</a></section></article><p><code>ExtentIntegrated</code> extends the <code>AbstractIntegrated</code> interface by a single method - <a href="api.html#PropCheck.extent-Tuple{PropCheck.ExtentIntegrated}"><code>PropCheck.extent</code></a>. Its purpose is simple - values produced by an <code>ExtentIntegrated</code> are expected to fall within a given ordered set, with a maximum and a minimum, which is what is returned by <code>extent</code>.</p><h2 id="InfiniteIntegrated{T}"><a class="docs-heading-anchor" href="#InfiniteIntegrated{T}"><code>InfiniteIntegrated{T}</code></a><a id="InfiniteIntegrated{T}-1"></a><a class="docs-heading-anchor-permalink" href="#InfiniteIntegrated{T}" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PropCheck.InfiniteIntegrated" href="#PropCheck.InfiniteIntegrated"><code>PropCheck.InfiniteIntegrated</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">InfiniteIntegrated{T} &lt;: AbstractIntegrated{T}</code></pre><p>Abstract supertype for all integrated shrinkers that provide infinite generation of elements.</p><p>Fallback definitions:     * <code>Base.IteratorSize(::Type{&lt;:InfiniteIntegrated}) = Base.IsInfinite()</code></p><p>Overwriting <code>Base.IteratorSize</code> for subtypes of this type is disallowed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/PropCheck.jl/blob/c00aa873953d10edb33ac9e5846983d9516dbcab/src/integrated.jl#L51-L60">source</a></section></article><p><code>InfiniteIntegrated</code> are at the core of PropCheck.jl; they allow for arbitrarily long generation of new values. They are currently always implementes as stateless objects, and underpin the majority of generation that is possible with PropCheck.jl.</p><h2 id="FiniteIntegrated{T}"><a class="docs-heading-anchor" href="#FiniteIntegrated{T}"><code>FiniteIntegrated{T}</code></a><a id="FiniteIntegrated{T}-1"></a><a class="docs-heading-anchor-permalink" href="#FiniteIntegrated{T}" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PropCheck.FiniteIntegrated" href="#PropCheck.FiniteIntegrated"><code>PropCheck.FiniteIntegrated</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FiniteIntegrated{T} &lt;: AbstractIntegrated{T}</code></pre><p>An integrated shrinker producing only a finite number of elements.</p><ul><li><code>Base.IteratorSize(::FiniteIntegrated)</code> must return a <code>Base.HasLength()</code> or <code>Base.HasShape</code>.<ul><li><code>length(::T)</code> needs to be implemented for your <code>T &lt;: FiniteIntegrated</code>; there is no fallback.</li><li>If your <code>T &lt;: FiniteIntegrated</code> has a shape, return that from <code>IteratorSize</code> instead &amp; implement <code>size</code> as well.</li></ul></li></ul><p>Once the integrated generator is exhausted, <code>generate(::FiniteIntegrated)</code> will return <code>nothing</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/PropCheck.jl/blob/c00aa873953d10edb33ac9e5846983d9516dbcab/src/integrated.jl#L253-L263">source</a></section></article><p><code>FiniteIntegrated</code> are used for stopping generation of values. They are currently always implemented as stateful objects during generation, i.e. they cannot be restarted. This may change in the future, but is (currently) a consequence of the existing design.</p><h2 id="Generation-and-Shrinking"><a class="docs-heading-anchor" href="#Generation-and-Shrinking">Generation &amp; Shrinking</a><a id="Generation-and-Shrinking-1"></a><a class="docs-heading-anchor-permalink" href="#Generation-and-Shrinking" title="Permalink"></a></h2><p>These two functions are required if you want to customize shrinking &amp; type-based generation. It&#39;s certainly not necessary to implement these to work with most features of this package, but they are required if you want to customize what kinds of object <a href="interfaces.html#itype"><code>itype</code></a> returns.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PropCheck.shrink" href="#PropCheck.shrink"><code>PropCheck.shrink</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">shrink(val::T) where T</code></pre><p>Function to be used during shrinking of <code>val</code>. Must return an iterable of shrunk values, which can be lazy. If the returned iterable is empty, it&#39;s taken as a signal that the given value cannot shrink further.</p><p>Must <em>never</em> return a previously input value, i.e. no value <code>val</code> used as input should ever be produced by <code>shrink(val)</code> or subsequent applications of <code>shrink</code> on the produced elements. This <em>will</em> lead to infinite looping during shrinking.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/PropCheck.jl/blob/c00aa873953d10edb33ac9e5846983d9516dbcab/src/PropCheck.jl#L17-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PropCheck.generate" href="#PropCheck.generate"><code>PropCheck.generate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">generate(rng::AbstractRNG, ::Type{T}) where T -&gt; T</code></pre><p>Function to generate a single value of type <code>T</code>. Falls back to constructor inspection, which <em>will</em> generate values for <code>::Any</code> typed arguments.</p><p>Types that have <code>rand</code> defined for them should forward to it here, assuming <code>rand</code> returns the full spectrum of possible instances. Assumed to return an object of type <code>T</code>.</p><div class="admonition is-info"><header class="admonition-header">Float64</header><div class="admonition-body"><p>A good example for when not to forward to <code>rand</code> is <code>Float64</code> - by default, Julia only generates values in the half-open interval <code>[0,1)</code>, meaning <code>Inf</code>, <code>NaN</code> and similar special values aren&#39;t generated at all. As you might imagine, this is not desirable for a framework that ought to find bugs in code that <em>doesn&#39;t</em> handle these kinds of values correctly.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/PropCheck.jl/blob/c00aa873953d10edb33ac9e5846983d9516dbcab/src/PropCheck.jl#L28-L40">source</a></section></article><h3 id="itype"><a class="docs-heading-anchor" href="#itype"><code>itype</code></a><a id="itype-1"></a><a class="docs-heading-anchor-permalink" href="#itype" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PropCheck.itype" href="#PropCheck.itype"><code>PropCheck.itype</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">itype(T::Type[, shrink=shrink]) -&gt; AbstractIntegrated</code></pre><p>A convenience constructor for creating integrated shrinkers, generating their values from a type.</p><p>Trees created by this function will have their elements shrink according to <code>shrink</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/PropCheck.jl/blob/c00aa873953d10edb33ac9e5846983d9516dbcab/src/PropCheck.jl#L53-L59">source</a></section></article><p>In order to hook into the generation provided by <code>itype</code>, define <a href="interfaces.html#PropCheck.generate"><code>generate</code></a> for your type <code>T</code>.</p><p>Generally speaking, <code>generate</code> should always produce the full set of possible values of a type. For example, <code>itype(Float64)</code> can produce every possible <code>Float64</code> value, with every possible bitpattern - that includes all different kinds of <code>NaN</code>.</p><p>Be sure to also define a shrinking function for your type, by adding a method to <a href="interfaces.html#PropCheck.shrink"><code>shrink</code></a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="faq.html">« FAQ</a><a class="docs-footer-nextpage" href="api.html">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Wednesday 13 March 2024 08:56">Wednesday 13 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
