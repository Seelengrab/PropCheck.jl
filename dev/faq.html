<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>FAQ · PropCheck.jl Documentation</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">PropCheck.jl Documentation</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Main Page</a></li><li><a class="tocitem" href="intro.html">Introduction to PBT</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="Examples/basic.html">Basic Usage</a></li><li><a class="tocitem" href="Examples/structs.html">Generating Structs</a></li><li><a class="tocitem" href="Examples/containers.html">Generating Containers</a></li><li><a class="tocitem" href="Examples/properties.html">Composing Generators</a></li><li><a class="tocitem" href="Examples/chaining.html">Generator Chaining</a></li></ul></li><li><a class="tocitem" href="shrinktrees.html">Shrinking with <code>Tree</code>s</a></li><li class="is-active"><a class="tocitem" href="faq.html">FAQ</a><ul class="internal"><li><a class="tocitem" href="#What-exactly-is-&quot;shrinking&quot;?"><span>What exactly is &quot;shrinking&quot;?</span></a></li><li><a class="tocitem" href="#What-about-formal-specifications?"><span>What about formal specifications?</span></a></li><li><a class="tocitem" href="#What-about-package-XYZ?"><span>What about package XYZ?</span></a></li></ul></li><li><a class="tocitem" href="interfaces.html">Interfaces</a></li><li><a class="tocitem" href="api.html">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="faq.html">FAQ</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="faq.html">FAQ</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Seelengrab/PropCheck.jl/blob/main/docs/src/faq.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="FAQ"><a class="docs-heading-anchor" href="#FAQ">FAQ</a><a id="FAQ-1"></a><a class="docs-heading-anchor-permalink" href="#FAQ" title="Permalink"></a></h1><h2 id="What-exactly-is-&quot;shrinking&quot;?"><a class="docs-heading-anchor" href="#What-exactly-is-&quot;shrinking&quot;?">What exactly is &quot;shrinking&quot;?</a><a id="What-exactly-is-&quot;shrinking&quot;?-1"></a><a class="docs-heading-anchor-permalink" href="#What-exactly-is-&quot;shrinking&quot;?" title="Permalink"></a></h2><p>And the related questions, &quot;What is being minimized when shrinking? What is the figure of merit?&quot;, originally asked <a href="https://discourse.julialang.org/t/ann-propcheck-jl/101481/21?u=sukera">here</a>.</p><p>Measuring shrinking values is a bit difficult - after all, the goal is to create a smaller (to human eyes) instance of the given type. It&#39;s very subjective what that means, but there are some generalities you can apply. For example, a <code>0.0</code> is less &quot;complex&quot; of a value than <code>1234651.3465</code>, so it&#39;s usually considered smaller for shrinking purposes. Similarly, an array with just 2 values is generally considered simpler/smaller than an array with 4123 values, even if both arrays otherwise exhibit the same properties.</p><p>Expanding on that - consider checking whether all arrays of positive integers are sorted. Surely, there are lots of counterexamples to that, like <code>[164, 45, 128, 202, 87]</code>, <code>[5,3,2,1]</code>, <code>[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]</code>, but there&#39;s only one example that&#39;s minimal: <code>[1, 0]</code>, the array with minimal values and minimal length.</p><p>This is of course not correct for all properties and all value domains; the &quot;minimal counterexample&quot; can  look quite different depending on what kind of values you&#39;re mostly interested in. For example, if you&#39;re interested in finding the smallest possible counterexample for arrays of <code>Int8</code>, it&#39;ll be <code>[-127, -128]</code>, because the smallest possible counterexample numerically is a negative number with larger absolute value. By default, PropCheck won&#39;t give you that, because a smaller absolute value is usually more desirable for humans to think about; the bitpattern underlying the number is simpler (or shorter, if you remove leading zeros). To have PropCheck give you those smaller numerical shrinks, you simply give e.g. <code>itype</code> a shrinking function producing those values:</p><pre><code class="language-julia hljs">julia&gt; using PropCheck

julia&gt; vect = PropCheck.vector(ival(4), itype(Int8, PropCheck.shrinkTowards(typemin(Int8))));

julia&gt; check(issorted, vect)
┌ Info: Found counterexample for &#39;issorted&#39;, beginning shrinking...
│   Counterexample =
│    4-element Vector{Int8}:
│      -2
│      58
│      21
└     -85
[ Info: 32 counterexamples found
2-element Vector{Int8}:
 -127
 -128</code></pre><p><code>shrinkTowards</code> currently only has definitions for numeric types (<code>&lt;: Integer</code>, <code>&lt;: AbstractFloat</code>, <code>Bool</code>) because shrinking towards a general object is quite a bit harder - e.g. shrinking towards a given string could be an option by working through inserts, deletions &amp; character changes, but I&#39;ll have to think about how to best do that to make sure the full possible space between a given source &amp; target string is generateable.</p><blockquote><p>What is being minimized when shrinking? What is the figure of merit?</p></blockquote><p>Circling back around to your question - anything you want, really! With a custom shrinking function (which you can supply to everything that generates a value), YOU get to decide how you want to shrink/minimize things. PropCheck.jl just tries to give you some sane defaults for types from Base (or at least, those I&#39;ve gotten around to implementing <code>generate</code> and <code>shrink</code> for). E.g. in <a href="Examples/properties.html#Composing-Generators">Composing Generators</a>, I use <code>PropCheck.noshrink</code> to make sure some strings <em>don&#39;t</em> shrink when shrinking the object the generator is used in, because looking at a student with a name is nicer than looking at a student with the empty string as a name. This is generally applicable with any custom shrinking function; whichever values you consider to be smaller for the purpose of that shrinking function are what PropCheck.jl considers &quot;smaller&quot; (which is also why it&#39;s important that shrinking functions can&#39;t produce shrinking loops - i.e. a shrinking function must never produce a value that, when shrunk with the same shrinking function again, could lead to the initial value).</p><h2 id="What-about-formal-specifications?"><a class="docs-heading-anchor" href="#What-about-formal-specifications?">What about formal specifications?</a><a id="What-about-formal-specifications?-1"></a><a class="docs-heading-anchor-permalink" href="#What-about-formal-specifications?" title="Permalink"></a></h2><p>While efforts regarding formal specifications &amp; machine checkable proofs are comendable, I think we can get quite far with property based testing &amp; fuzzing before we need to tackle the dragon that is formal methods &amp; verification. PropCheck.jl is decidedly not in the formal verification camp - it&#39;s not an interface to SAT or SMT solvers, but a fuzzer. Said differently, property based testing + fuzzing are a fuzzy, statistical subset of full formal verification. You can think of running fuzzing tests as increasing confidence in the correctness of your code each time you run your testsuite, due to different inputs being chosen.</p><p>That being said, if this package becomes obsolete due to tremendous advances in formal methods &amp; verification in Julia, I&#39;ll happily retire this package to the annals of history :)</p><h2 id="What-about-package-XYZ?"><a class="docs-heading-anchor" href="#What-about-package-XYZ?">What about package XYZ?</a><a id="What-about-package-XYZ?-1"></a><a class="docs-heading-anchor-permalink" href="#What-about-package-XYZ?" title="Permalink"></a></h2><p>There are a number of other codebases related to property based testing (for example, <a href="https://github.com/ps-pat/JCheck.jl">JCheck.jl</a>, <a href="https://github.com/pao/QuickCheck.jl">QuickCheck.jl</a> or <a href="https://git.sr.ht/~quf/RandomizedPropertyTest.jl">RandomizedPropertyTest.jl</a>) but to my eyes, they are either very old (10+ years!) and don&#39;t support modern Julia, don&#39;t support shrinking or don&#39;t really compose their generators well, due to being based on QuickCheck. PropCheck.jl, while certainly taking inspiration from QuickCheck, is using a mixed approach, focusing on integrated shrinking. This has advantages and disadvantages, but from my experience with the package so far, the current architecture is pretty extensible and works much better than a plain implementation of QuickCheck (Julia is much less focused on types than Haskell is, after all; much of the information we have about a type is implicit &amp; not guaranteed, and even with that, some type based shrinks are just plain bad, due to even their types not capturing the full semantics of the produced values). Most of the features currently in PropCheck.jl came about because I ran into an issue that I wanted to solve when testing a different codebase - a workflow I don&#39;t expect to change too much in the future.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="shrinktrees.html">« Shrinking with <code>Tree</code>s</a><a class="docs-footer-nextpage" href="interfaces.html">Interfaces »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Saturday 12 August 2023 16:04">Saturday 12 August 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
